{"extension":{"programModules":{"EXT002MI":{"program":"EXT002MI","triggers":{},"transactions":{"AddPWTrans":{"sourceUuid":"a09ea65e-f795-44d0-9835-c7c25dcf407e","name":"AddPWTrans","program":"EXT002MI","description":"add","active":true,"multi":false,"modified":1633693466429,"modifiedBy":"EDACILLO","outputFields":[],"inputFields":[{"name":"CONO","description":"company","length":3,"mandatory":false,"type":"N"},{"name":"PWID","description":"product withdrawal ID","length":8,"mandatory":true,"type":"A"},{"name":"ORNO","description":"customer order number","length":10,"mandatory":true,"type":"A"},{"name":"PONR","description":"order line number","length":5,"mandatory":true,"type":"N"},{"name":"POSX","description":"line suffix","length":3,"mandatory":false,"type":"N"},{"name":"STYN","description":"style number","length":15,"mandatory":true,"type":"A"},{"name":"OPTX","description":"colour","length":15,"mandatory":false,"type":"A"},{"name":"OPTY","description":"size","length":15,"mandatory":false,"type":"A"},{"name":"OPTZ","description":"length","length":15,"mandatory":false,"type":"A"},{"name":"ITNO","description":"item number","length":15,"mandatory":false,"type":"A"},{"name":"RSCD","description":"transaction reason","length":3,"mandatory":false,"type":"A"},{"name":"CUNO","description":"customer","length":10,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{}}},"utilities":{},"sources":{"a09ea65e-f795-44d0-9835-c7c25dcf407e":{"uuid":"a09ea65e-f795-44d0-9835-c7c25dcf407e","updated":1643264495222,"updatedBy":"EDACILLO","created":1632731191794,"createdBy":"EDACILLO","apiVersion":"0.15","beVersion":"16.0.0.20211117170031","codeHash":"5AC6E5C66D655E324DB20AEB674C7A4FB0A797BE8C1D55A12EE2734652ABE3F2","code":"LyoqDQogKiBSRUFETUUNCiAqDQogKiBOYW1lOiBBZGRQV1RyYW5zLmdyb292eQ0KICogRGF0ZSAgICAgICAgQ2hhbmdlZCBCeSAgICAgICAgICBEZXNjcmlwdGlvbg0KICogMjAyMTA5MjcgICAgRURBQ0lMTE8gICAgICAgICAgICA1MDcyIOKAkyBQcm9kdWN0IExpbmUgV2l0aGRyYXdhbA0KICoNCiAqLw0KDQppbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZTsNCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTsNCmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyOw0KDQpwdWJsaWMgY2xhc3MgQWRkUFdUcmFucyBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pOw0KICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlOw0KICBwcml2YXRlIGZpbmFsIExvZ2dlckFQSSBsb2dnZXI7DQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtOw0KDQogIHByaXZhdGUgaW50IGlDT05POw0KICBwcml2YXRlIFN0cmluZyBpUFdJRDsNCiAgcHJpdmF0ZSBTdHJpbmcgaU9STk87DQogIHByaXZhdGUgaW50IGlQT05SOw0KICBwcml2YXRlIGludCBpUE9TWDsNCiAgcHJpdmF0ZSBTdHJpbmcgaVNUWU47DQogIHByaXZhdGUgU3RyaW5nIGlPUFRYOw0KICBwcml2YXRlIFN0cmluZyBpT1BUWTsNCiAgcHJpdmF0ZSBTdHJpbmcgaU9QVFo7DQogIHByaXZhdGUgU3RyaW5nIGlJVE5POw0KICBwcml2YXRlIFN0cmluZyBpUlNDRDsNCiAgcHJpdmF0ZSBTdHJpbmcgaUNVTk87DQogIHByaXZhdGUgU3RyaW5nIGlDVU5NOw0KICBwcml2YXRlIFN0cmluZyBpT1JTVDsNCg0KICBwdWJsaWMgQWRkUFdUcmFucyhNSUFQSSBtaSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIExvZ2dlckFQSSBsb2dnZXIsIFByb2dyYW1BUEkgcHJvZ3JhbSkgew0KICAgIHRoaXMubWkgPSBtaTsNCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2U7DQogICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7DQogICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbTsNCiAgfQ0KDQogIHB1YmxpYyB2b2lkIG1haW4oKSB7DQogICAgaUNPTk8gPSAoSW50ZWdlcikgbWkuaW4uZ2V0KCJDT05PIikgPT0gbnVsbCA/IChJbnRlZ2VyKSBwcm9ncmFtLmdldExEQVpEKCkuQ09OTyA6IChJbnRlZ2VyKSBtaS5pbi5nZXQoIkNPTk8iKTsNCiAgICBpUFdJRCA9IG1pLmluRGF0YS5nZXQoIlBXSUQiKSA9PSBudWxsID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJQV0lEIikudHJpbSgpOw0KICAgIGlPUk5PID0gbWkuaW5EYXRhLmdldCgiT1JOTyIpID09IG51bGwgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk9STk8iKS50cmltKCk7DQogICAgaVBPTlIgPSAoSW50ZWdlcikgbWkuaW4uZ2V0KCJQT05SIikgPT0gbnVsbCA/IDAgOiAoSW50ZWdlcikgbWkuaW4uZ2V0KCJQT05SIik7DQogICAgaVBPU1ggPSAoSW50ZWdlcikgbWkuaW4uZ2V0KCJQT1NYIikgPT0gbnVsbCA/IDAgOiAoSW50ZWdlcikgbWkuaW4uZ2V0KCJQT1NYIik7DQogICAgaVNUWU4gPSBtaS5pbkRhdGEuZ2V0KCJTVFlOIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiU1RZTiIpLnRyaW0oKTsNCiAgICBpT1BUWCA9IG1pLmluRGF0YS5nZXQoIk9QVFgiKSA9PSBudWxsID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJPUFRYIikudHJpbSgpOw0KICAgIGlPUFRZID0gbWkuaW5EYXRhLmdldCgiT1BUWSIpID09IG51bGwgPyAiIiA6IG1pLmluRGF0YS5nZXQoIk9QVFkiKS50cmltKCk7DQogICAgaU9QVFogPSBtaS5pbkRhdGEuZ2V0KCJPUFRaIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiT1BUWiIpLnRyaW0oKTsNCiAgICBpSVROTyA9IG1pLmluRGF0YS5nZXQoIklUTk8iKSA9PSBudWxsID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJJVE5PIikudHJpbSgpOw0KICAgIGlSU0NEID0gbWkuaW5EYXRhLmdldCgiUlNDRCIpID09IG51bGwgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlJTQ0QiKS50cmltKCk7DQogICAgaUNVTk8gPSBtaS5pbkRhdGEuZ2V0KCJDVU5PIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiQ1VOTyIpLnRyaW0oKTsNCg0KICAgIGlQV0lEID0gaVBXSUQgPT0gJz8nID8gIiIgOiBpUFdJRC50b1VwcGVyQ2FzZSgpOw0KICAgIGlPUk5PID0gaU9STk8gPT0gJz8nID8gIiIgOiBpT1JOTzsNCiAgICBpU1RZTiA9IGlTVFlOID09ICc/JyA/ICIiIDogaVNUWU47DQogICAgaU9QVFggPSBpT1BUWCA9PSAnPycgPyAiIiA6IGlPUFRYOw0KICAgIGlPUFRZID0gaU9QVFkgPT0gJz8nID8gIiIgOiBpT1BUWTsNCiAgICBpT1BUWiA9IGlPUFRaID09ICc/JyA/ICIiIDogaU9QVFo7DQogICAgaUlUTk8gPSBpSVROTyA9PSAnPycgPyAiIiA6IGlJVE5POw0KICAgIGlSU0NEID0gaVJTQ0QgPT0gJz8nID8gIiIgOiBpUlNDRDsNCiAgICBpQ1VOTyA9IGlDVU5PID09ICc/JyA/ICIiIDogaUNVTk87DQoNCiAgICBpZiAoIXZhbGlkYXRlSW5wdXQoKSkgew0KICAgICAgYWRkRVhUUFdUKCk7DQogICAgfQ0KICB9DQoNCiAgLyoqDQogICAqIHZhbGlkYXRlSW5wdXQgLSBjaGVjayBNSSBpbnB1dA0KICAgKiBAcmV0dXJuDQogICAqLw0KICBkZWYgYm9vbGVhbiB2YWxpZGF0ZUlucHV0KCkgew0KICAgIGlmIChpUFdJRCA9PSAiIikgew0KICAgICAgbWkuZXJyb3IoIlByb2R1Y3Qgd2l0aGRyYXdhbCBJRCBpcyByZXF1aXJlZCIpOw0KICAgICAgcmV0dXJuIHRydWU7DQogICAgfSBlbHNlIHsNCiAgICAgIGlmICghY2hrUFdJRChpUFdJRCkpIHsNCiAgICAgICAgbWkuZXJyb3IoIlByb2R1Y3Qgd2l0aGRyYXdhbCBJRCAke2lQV0lEfSBpcyBpbnZhbGlkIik7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgfQ0KICAgIH0NCiAgICBpZiAoaU9STk8gPT0gIiIpIHsNCiAgICAgIG1pLmVycm9yKCJPcmRlciBudW1iZXIgaXMgcmVxdWlyZWQiKTsNCiAgICAgIHJldHVybiB0cnVlOw0KICAgIH0gZWxzZSB7DQogICAgICBpT1JTVCA9ICIiOw0KICAgICAgaWYgKCFjaGtDTyhpT1JOTywgaVBPTlIsIGlQT1NYKSkgew0KICAgICAgICBtaS5lcnJvcigiT3JkZXIgbnVtYmVyICR7aU9STk99IGlzIGludmFsaWQiKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICB9DQogICAgfQ0KICAgIGlmIChpU1RZTiA9PSAiIikgew0KICAgICAgbWkuZXJyb3IoIlN0eWxlIGlzIHJlcXVpcmVkIik7DQogICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9IGVsc2Ugew0KICAgICAgaWYgKCFjaGtTVFlOKGlTVFlOKSkgew0KICAgICAgICBtaS5lcnJvcigiU3R5bGUgJHtpU1RZTn0gaXMgaW52YWxpZCIpOw0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgIH0NCiAgICB9DQogICAgaWYgKGlJVE5PID09ICIiKSB7DQogICAgICBtaS5lcnJvcigiSXRlbSBudW1iZXIgaXMgcmVxdWlyZWQiKTsNCiAgICAgIHJldHVybiB0cnVlOw0KICAgIH0gZWxzZSB7DQogICAgICBpZiAoIWNoa1N0eWxlKGlTVFlOLCBpSVROTykpIHsNCiAgICAgICAgbWkuZXJyb3IoIiBTdHlsZSAke2lTVFlOfSBmb3IgaXRlbSAke2lJVE5PfSBpcyBpbnZhbGlkIik7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgfQ0KICAgIH0NCiAgICBpZiAoaVJTQ0QgIT0gIiIpIHsNCiAgICAgIGlmICghY2hrUlNDRChpUlNDRCkpIHsNCiAgICAgICAgbWkuZXJyb3IoIlJlYXNvbiBjb2RlICR7aVJTQ0R9IGlzIGludmFsaWQiKTsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICB9DQogICAgfQ0KICAgIGlmIChpQ1VOTyAhPSAiIikgew0KICAgICAgaUNVTk0gPSAiIjsNCiAgICAgIGlmICghY2hrQ1VOTyhpQ1VOTykpIHsNCiAgICAgICAgbWkuZXJyb3IoIkN1c3RvbWVyIG51bWJlciAke2lDVU5PfSBpcyBpbnZhbGlkIik7DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gZmFsc2U7DQogIH0NCg0KICAvKioNCiAgICogY2hrUFdJRCAtIGNoZWNrIEVYVFBXVCByZWNvcmQNCiAgICogQHBhcmFtIHB3aWQNCiAgICogQHJldHVybg0KICAgKi8NCiAgZGVmIGJvb2xlYW4gY2hrUFdJRChTdHJpbmcgcHdpZCkgew0KICAgIGJvb2xlYW4gaXNWYWxpZFJlY29yZCA9IGZhbHNlOw0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkVYVFBSVyIpDQogICAgICAuaW5kZXgoIjAwIikNCiAgICAgIC5zZWxlY3Rpb24oIkVYUFdJRCINCiAgICAgICkNCiAgICAgIC5idWlsZCgpOw0KDQogICAgREJDb250YWluZXIgRVhUUFJXID0gcXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgRVhUUFJXLnNldCgiRVhDT05PIiwgaUNPTk8pOw0KICAgIEVYVFBSVy5zZXQoIkVYUFdJRCIsIHB3aWQpOw0KDQogICAgaWYgKHF1ZXJ5LnJlYWQoRVhUUFJXKSkgew0KICAgICAgaXNWYWxpZFJlY29yZCA9IHRydWU7DQogICAgfQ0KICAgIHJldHVybiBpc1ZhbGlkUmVjb3JkOw0KICB9DQoNCiAgLyoqDQogICAqIGNoa0NPIC0gY2hlY2sgQ08NCiAgICogQHBhcmFtIG9ybm8NCiAgICogQHBhcmFtIHBvbnINCiAgICogQHBhcmFtIHBvc3gNCiAgICogQHJldHVybg0KICAgKi8NCiAgZGVmIGJvb2xlYW4gY2hrQ08oU3RyaW5nIG9ybm8sIGludCBwb25yLCBpbnQgcG9zeCkgew0KICAgIGJvb2xlYW4gaXNWYWxpZFJlY29yZCA9IGZhbHNlOw0KICAgIERCQWN0aW9uIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk9PTElORSIpDQogICAgICAuaW5kZXgoIjAwIikNCiAgICAgIC5zZWxlY3Rpb24oIk9CSVROTyIsICJPQk9SU1QiKQ0KICAgICAgLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgY29udGFpbmVyID0gcXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgY29udGFpbmVyLnNldCgiT0JDT05PIiwgaUNPTk8pOw0KICAgIGNvbnRhaW5lci5zZXQoIk9CT1JOTyIsIG9ybm8pOw0KICAgIGNvbnRhaW5lci5zZXQoIk9CUE9OUiIsIHBvbnIpOw0KICAgIGNvbnRhaW5lci5zZXQoIk9CUE9TWCIsIHBvc3gpOw0KICAgIGlmIChxdWVyeS5yZWFkKGNvbnRhaW5lcikpIHsNCiAgICAgIFN0cmluZyBpdG5vID0gY29udGFpbmVyLmdldCgiT0JJVE5PIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgICBpT1JTVCA9IGNvbnRhaW5lci5nZXQoIk9CT1JTVCIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgaWYgKGlJVE5PICE9ICIiICYmIGlJVE5PICE9IGl0bm8pIHsNCiAgICAgICAgaXNWYWxpZFJlY29yZCA9IGZhbHNlOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgaUlUTk8gPSBpSVROTyA9PSAiIiA/IGl0bm8gOiBpSVROTzsNCiAgICAgICAgaXNWYWxpZFJlY29yZCA9IHRydWU7DQogICAgICB9DQogICAgfQ0KICAgIHJldHVybiAgaXNWYWxpZFJlY29yZDsNCiAgfQ0KDQogIC8qKg0KICAgKiBjaGtTVFlOIC0gY2hlY2sgaWYgdmFsaWQgU1RZTg0KICAgKiBAcGFyYW0gc3R5bg0KICAgKiBAcmV0dXJuDQogICAqLw0KICBkZWYgYm9vbGVhbiBjaGtTVFlOKFN0cmluZyBzdHluKSB7DQogICAgYm9vbGVhbiBpc1ZhbGlkID0gZmFsc2U7DQogICAgREJBY3Rpb24gcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTU1PRE1BIikNCiAgICAgIC5pbmRleCgiMDAiKQ0KICAgICAgLnNlbGVjdGlvbigiSEhTVEFUIikNCiAgICAgIC5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lci5zZXQoIkhIQ09OTyIsIGlDT05PKTsNCiAgICBjb250YWluZXIuc2V0KCJISFNUWU4iLCBzdHluKTsNCiAgICBpZiAocXVlcnkucmVhZChjb250YWluZXIpKSB7DQogICAgICBpc1ZhbGlkID0gdHJ1ZTsNCiAgICB9DQogICAgcmV0dXJuICBpc1ZhbGlkOw0KICB9DQoNCiAgLyoqDQogICAqIGNoa1N0eWxlIC0gY2hlY2sgc3R5bGUgaXRlbSByZWNvcmQNCiAgICogQHBhcmFtIHN0eW4NCiAgICogQHBhcmFtIGl0bm8NCiAgICogQHJldHVybg0KICAgKi8NCiAgZGVmIGJvb2xlYW4gY2hrU3R5bGUoU3RyaW5nIHN0eW4sIFN0cmluZyBpdG5vKSB7DQogICAgYm9vbGVhbiBpc1ZhbGlkID0gZmFsc2U7DQogICAgZGVmIHF1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIk1JVE1BSCIpDQogICAgICAuaW5kZXgoIjEwIikNCiAgICAgIC5zZWxlY3Rpb24oIkhNT1BUWCIsICJITU9QVFkiLCAiSE1PUFRaIik7DQogICAgaWYgKGlPUFRYICE9ICcnKSB7DQogICAgICBkZWYgZXhwcmVzc2lvbiA9IGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJNSVRNQUgiKTsNCiAgICAgIGV4cHJlc3Npb24gPSBleHByZXNzaW9uLmVxKCJITU9QVFgiLCBpT1BUWCk7DQogICAgICBpZiAoaU9QVFkgIT0gJycpIHsNCiAgICAgICAgZXhwcmVzc2lvbiA9IGV4cHJlc3Npb24uYW5kKGV4cHJlc3Npb24uZXEoIkhNT1BUWSIsIGlPUFRZKSk7DQogICAgICB9DQogICAgICBpZiAoaU9QVFogIT0gJycpIHsNCiAgICAgICAgZXhwcmVzc2lvbiA9IGV4cHJlc3Npb24uYW5kKGV4cHJlc3Npb24uZXEoIkhNT1BUWiIsIGlPUFRaKSk7DQogICAgICB9DQogICAgICBxdWVyeS5tYXRjaGluZyhleHByZXNzaW9uKTsNCiAgICB9IGVsc2UgaWYgKGlPUFRZICE9ICcnKSB7DQogICAgICBkZWYgZXhwcmVzc2lvbiA9IGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJNSVRNQUgiKTsNCiAgICAgIGV4cHJlc3Npb24gPSBleHByZXNzaW9uLmVxKCJITU9QVFkiLCBpT1BUWSk7DQogICAgICBpZiAoaU9QVFogIT0gJycpIHsNCiAgICAgICAgZXhwcmVzc2lvbiA9IGV4cHJlc3Npb24uYW5kKGV4cHJlc3Npb24uZXEoIkhNT1BUWiIsIGlPUFRaKSk7DQogICAgICB9DQogICAgICBxdWVyeS5tYXRjaGluZyhleHByZXNzaW9uKTsNCiAgICB9IGVsc2UgaWYgKGlPUFRaICE9ICcnKSB7DQogICAgICBkZWYgZXhwcmVzc2lvbiA9IGRhdGFiYXNlLmdldEV4cHJlc3Npb25GYWN0b3J5KCJNSVRNQUgiKTsNCiAgICAgIGV4cHJlc3Npb24gPSBleHByZXNzaW9uLmVxKCJITU9QVFoiLCBpT1BUWik7DQogICAgICBxdWVyeS5tYXRjaGluZyhleHByZXNzaW9uKTsNCiAgICB9DQogICAgZGVmIGFjdGlvbiA9IHF1ZXJ5LmJ1aWxkKCk7DQogICAgZGVmIGNvbnRhaW5lciA9IGFjdGlvbi5jcmVhdGVDb250YWluZXIoKTsNCiAgICBjb250YWluZXIuc2V0KCJITUNPTk8iLCBpQ09OTyk7DQogICAgY29udGFpbmVyLnNldCgiSE1TVFlOIiwgc3R5bik7DQogICAgY29udGFpbmVyLnNldCgiSE1JVE5PIiwgaXRubyk7DQogICAgaWYgKGFjdGlvbi5yZWFkKGNvbnRhaW5lcikpIHsNCiAgICAgIFN0cmluZyBvcHR4ID0gY29udGFpbmVyLmdldCgiSE1PUFRYIikgPT0gbnVsbCA/ICIiIDogY29udGFpbmVyLmdldCgiSE1PUFRYIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgICBTdHJpbmcgb3B0eSA9IGNvbnRhaW5lci5nZXQoIkhNT1BUWSIpID09IG51bGwgPyAiIiA6IGNvbnRhaW5lci5nZXQoIkhNT1BUWSIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgU3RyaW5nIG9wdHogPSBjb250YWluZXIuZ2V0KCJITU9QVFoiKSA9PSBudWxsID8gIiIgOiBjb250YWluZXIuZ2V0KCJITU9QVFoiKS50b1N0cmluZygpLnRyaW0oKTsNCiAgICAgIGlPUFRYID0gaU9QVFggPT0gIiIgPyBvcHR4IDogaU9QVFg7DQogICAgICBpT1BUWSA9IGlPUFRZID09ICIiID8gb3B0eSA6IGlPUFRZOw0KICAgICAgaU9QVFogPSBpT1BUWiA9PSAiIiA/IG9wdHogOiBpT1BUWjsNCiAgICAgIGlzVmFsaWQgPSB0cnVlOw0KICAgIH0NCiAgICByZXR1cm4gIGlzVmFsaWQ7DQogIH0NCg0KICAvKioNCiAgICogY2hrUlNDRCAtIGNoZWNrIHJlYXNvbiBjb2RlIHJlY29yZA0KICAgKiBAcGFyYW0gcnNjZA0KICAgKiBAcmV0dXJuDQogICAqLw0KICBkZWYgYm9vbGVhbiBjaGtSU0NEKFN0cmluZyByc2NkKSB7DQogICAgYm9vbGVhbiBpc1ZhbGlkUmVjb3JkID0gZmFsc2U7DQogICAgREJBY3Rpb24gcXVlcnlDU1lUQUIgPSBkYXRhYmFzZS50YWJsZSgiQ1NZVEFCIikNCiAgICAgIC5pbmRleCgiMDAiKQ0KICAgICAgLnNlbGVjdGlvbigiQ1RUWDQwIg0KICAgICAgKQ0KICAgICAgLmJ1aWxkKCk7DQoNCiAgICBEQkNvbnRhaW5lciBDU1lUQUIgPSBxdWVyeUNTWVRBQi5nZXRDb250YWluZXIoKTsNCiAgICBDU1lUQUIuc2V0KCJDVENPTk8iLCBpQ09OTyk7DQogICAgQ1NZVEFCLnNldCgiQ1RESVZJIiwgIiIpOw0KICAgIENTWVRBQi5zZXQoIkNUU1RDTyIsICJSU0NEIik7DQogICAgQ1NZVEFCLnNldCgiQ1RTVEtZIiwgcnNjZCk7DQogICAgQ1NZVEFCLnNldCgiQ1RMTkNEIiwgIiIpOw0KICAgIGlmIChxdWVyeUNTWVRBQi5yZWFkKENTWVRBQikpIHsNCiAgICAgIGlzVmFsaWRSZWNvcmQgPSB0cnVlOw0KICAgIH0NCiAgICByZXR1cm4gaXNWYWxpZFJlY29yZDsNCiAgfQ0KDQogIC8qKg0KICAgKiBjaGtDVU5PIC0gY2hlY2sgaWYgdmFsaWQgQ1VOTw0KICAgKiBAcGFyYW0gY3Vubw0KICAgKiBAcmV0dXJuDQogICAqLw0KICBkZWYgYm9vbGVhbiBjaGtDVU5PKFN0cmluZyBjdW5vKSB7DQogICAgaUNVTk0gPSAnJzsNCiAgICBib29sZWFuIGlzVmFsaWQgPSBmYWxzZTsNCiAgICBEQkFjdGlvbiBxdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJPQ1VTTUEiKQ0KICAgICAgLmluZGV4KCIwMCIpDQogICAgICAuc2VsZWN0aW9uKCJPS0NVTk0iLCAiT0tTVEFUIikNCiAgICAgIC5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIGNvbnRhaW5lciA9IHF1ZXJ5LmdldENvbnRhaW5lcigpOw0KICAgIGNvbnRhaW5lci5zZXQoIk9LQ09OTyIsIGlDT05PKTsNCiAgICBjb250YWluZXIuc2V0KCJPS0NVTk8iLCBjdW5vKTsNCiAgICBpZiAocXVlcnkucmVhZChjb250YWluZXIpKSB7DQogICAgICBpQ1VOTSA9IGNvbnRhaW5lci5nZXQoIk9LQ1VOTSIpID09IG51bGwgPyAiIiA6IGNvbnRhaW5lci5nZXQoIk9LQ1VOTSIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgICAgaXNWYWxpZCA9IHRydWU7DQogICAgfQ0KICAgIHJldHVybiAgaXNWYWxpZDsNCiAgfQ0KDQogIC8qKg0KICAgKiBhZGRFWFRQV1QgLSBpbnNlcnQgcmVjb3JkDQogICAqIEByZXR1cm4NCiAgICovDQogIGRlZiBhZGRFWFRQV1QoKSB7DQogICAgLy9EZWZpbmUgZGF0ZSBhbmQgdGltZQ0KICAgIGludCBjdXJyZW50RGF0ZSA9IExvY2FsRGF0ZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKTsNCiAgICBpbnQgY3VycmVudFRpbWUgPSBJbnRlZ2VyLnZhbHVlT2YoTG9jYWxEYXRlVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJISG1tc3MiKSkpOw0KDQogICAgREJBY3Rpb24gYWN0aW9uRVhUUFdUID0gZGF0YWJhc2UudGFibGUoIkVYVFBXVCIpDQogICAgICAuaW5kZXgoIjAwIikNCiAgICAgIC5idWlsZCgpOw0KDQogICAgREJDb250YWluZXIgRVhUUFdUID0gYWN0aW9uRVhUUFdULmdldENvbnRhaW5lcigpOw0KICAgIEVYVFBXVC5zZXQoIkVYQ09OTyIsIGlDT05PKTsNCiAgICBFWFRQV1Quc2V0KCJFWFBXSUQiLCBpUFdJRCk7DQogICAgRVhUUFdULnNldCgiRVhPUk5PIiwgaU9STk8pOw0KICAgIEVYVFBXVC5zZXQoIkVYUE9OUiIsIGlQT05SKTsNCiAgICBFWFRQV1Quc2V0KCJFWFBPU1giLCBpUE9TWCk7DQogICAgRVhUUFdULnNldCgiRVhTVFlOIiwgaVNUWU4pOw0KICAgIEVYVFBXVC5zZXQoIkVYT1BUWCIsIGlPUFRYKTsNCiAgICBFWFRQV1Quc2V0KCJFWE9QVFkiLCBpT1BUWSk7DQogICAgRVhUUFdULnNldCgiRVhPUFRaIiwgaU9QVFopOw0KICAgIEVYVFBXVC5zZXQoIkVYSVROTyIsIGlJVE5PKTsNCiAgICBFWFRQV1Quc2V0KCJFWFJTQ0QiLCBpUlNDRCk7DQogICAgRVhUUFdULnNldCgiRVhDVU5PIiwgaUNVTk8pOw0KICAgIEVYVFBXVC5zZXQoIkVYQ1VOTSIsIGlDVU5NKTsNCiAgICBFWFRQV1Quc2V0KCJFWE9SU1QiLCBpT1JTVCk7DQogICAgRVhUUFdULnNldCgiRVhSR0RUIiwgY3VycmVudERhdGUpOw0KICAgIEVYVFBXVC5zZXQoIkVYUkdUTSIsIGN1cnJlbnRUaW1lKTsNCiAgICBFWFRQV1Quc2V0KCJFWExNRFQiLCBjdXJyZW50RGF0ZSk7DQogICAgRVhUUFdULnNldCgiRVhDSElEIiwgcHJvZ3JhbS5nZXRVc2VyKCkpOw0KICAgIEVYVFBXVC5zZXQoIkVYQ0hOTyIsIDEpOw0KICAgIGlmICghYWN0aW9uRVhUUFdULmluc2VydChFWFRQV1QpKSB7DQogICAgICBtaS5lcnJvcigiUmVjb3JkIGFscmVhZHkgZXhpc3RzIik7DQogICAgfQ0KICB9DQp9DQo="}}},"signature":"ATAsAhR/WPqhHKzyqx7Ht9UoNm8dD9zdDgIUSVflR/gLrNuREfnRcJizZhCjdAQ=","signedBy":"EYOUSEFI","signed":1643328524490,"message":"Signed by Erfan Yousefi"}