{"programModules":{"EXT017MI":{"program":"EXT017MI","triggers":{},"transactions":{"ChgSelection":{"sourceUuid":"aefb6fc0-e6cb-479c-8e76-fbdbb9f567d9","name":"ChgSelection","program":"EXT017MI","description":"Change Selection","active":true,"multi":false,"modified":1691068941017,"modifiedBy":"EDIVIL05","outputFields":[],"inputFields":[{"name":"PRRF","description":"price list","length":10,"mandatory":true,"type":"A"},{"name":"CUCD","description":"currency","length":3,"mandatory":true,"type":"A"},{"name":"CUNO","description":"customer","length":10,"mandatory":false,"type":"A"},{"name":"FVDT","description":"valid from","length":8,"mandatory":true,"type":"N"},{"name":"FITN","description":"from item number","length":15,"mandatory":false,"type":"A"},{"name":"TITN","description":"to item number","length":15,"mandatory":false,"type":"A"},{"name":"FITG","description":"from item group","length":8,"mandatory":false,"type":"A"},{"name":"TITG","description":"to item group","length":8,"mandatory":false,"type":"A"},{"name":"FITC","description":"from product group","length":5,"mandatory":false,"type":"A"},{"name":"TITC","description":"to product group","length":5,"mandatory":false,"type":"A"},{"name":"FITT","description":"from item type","length":3,"mandatory":false,"type":"A"},{"name":"TITT","description":"to item type","length":3,"mandatory":false,"type":"A"},{"name":"FRSP","description":"from item responsible","length":10,"mandatory":false,"type":"A"},{"name":"TRSP","description":"to item responsible","length":10,"mandatory":false,"type":"A"},{"name":"SLFR","description":"from status","length":2,"mandatory":false,"type":"A"},{"name":"SLTO","description":"to status","length":2,"mandatory":false,"type":"A"},{"name":"FMAB","description":"from make/buy code","length":1,"mandatory":false,"type":"N"},{"name":"TMAB","description":"to make/buy code","length":1,"mandatory":false,"type":"N"},{"name":"FCHC","description":"from configuration code","length":1,"mandatory":false,"type":"N"},{"name":"TCHC","description":"to configuration code","length":1,"mandatory":false,"type":"N"},{"name":"FSUN","description":"from main supplier","length":10,"mandatory":false,"type":"A"},{"name":"TSUN","description":"to main supplier","length":10,"mandatory":false,"type":"A"},{"name":"FCUN","description":"To Customer Number","length":10,"mandatory":false,"type":"A"},{"name":"TCUN","description":"to customer number","length":10,"mandatory":false,"type":"A"},{"name":"FBGR","description":"from bonus group","length":2,"mandatory":false,"type":"A"},{"name":"TBGR","description":"to bonus group","length":2,"mandatory":false,"type":"A"},{"name":"FPRC","description":"from commission group","length":2,"mandatory":false,"type":"A"},{"name":"TPRC","description":"to commission group","length":2,"mandatory":false,"type":"A"},{"name":"FASS","description":"from assortment","length":6,"mandatory":false,"type":"A"},{"name":"TASS","description":"to assortment","length":6,"mandatory":false,"type":"A"}],"utilities":[]}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"aefb6fc0-e6cb-479c-8e76-fbdbb9f567d9":{"uuid":"aefb6fc0-e6cb-479c-8e76-fbdbb9f567d9","updated":1691070673251,"updatedBy":"EDIVIL05","created":1690274593746,"createdBy":"EDIVIL05","apiVersion":"0.15","beVersion":"16.0.0.20230516150031.5","language":"GROOVY","codeHash":"4B2DA192464C46426D9F50D03B0A7CD4AAD14059CEAF3F0E37957D1196884055","code":"LyoqDQoqICBCdXNpbmVzcyBFbmdpbmUgRXh0ZW5zaW9uDQoqLw0KLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCkV4dGVuc2lvbiBOYW1lOiBFWFQwMTdNSS5DaGdTZWxlY3Rpb24NClR5cGUgOiBFeHRlbmRNM1RyYW5zYWN0aW9uDQpTY3JpcHQgQXV0aG9yOiBFZGlzb24gVmlsbGFyDQpEYXRlOiAyMDIzLTA4LTAzDQoNCkRlc2NyaXB0aW9uOg0KICAgICAgUGVyZm9ybSBhY3Rpb24gb3IgbG9naWMgc2ltaWxhciB0byBPSVMwMTcvRiB3aGVuIGNoZWNraW5nIGFuZCB1cGRhdGluZyBzYWxlcyBwcmljZSByZWNvcmQuDQoNClJldmlzaW9uIEhpc3Rvcnk6DQpOYW1lICAgICAgICAgICAgICAgICAgICBEYXRlICAgICAgICAgICAgIFZlcnNpb24gICAgICAgICAgRGVzY3JpcHRpb24gb2YgQ2hhbmdlcw0KRWRpc29uIFZpbGxhciAgICAgICAgICAgMjAyMy0wOC0wMyAgICAgICAxLjAgICAgICAgICAgICAgIEluaXRpYWwgVmVyc2lvbg0KKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLw0KaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGUNCmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTsNCmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyDQppbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZVBhcnNlRXhjZXB0aW9uDQoNCnB1YmxpYyBjbGFzcyBDaGdTZWxlY3Rpb24gZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsNCiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaQ0KICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlDQogIHByaXZhdGUgZmluYWwgTG9nZ2VyQVBJIGxvZ2dlcg0KICBwcml2YXRlIGZpbmFsIFByb2dyYW1BUEkgcHJvZ3JhbQ0KICANCiAgcHVibGljIENoZ1NlbGVjdGlvbihNSUFQSSBtaSwgRGF0YWJhc2VBUEkgZGF0YWJhc2UsIExvZ2dlckFQSSBsb2dnZXIsIFByb2dyYW1BUEkgcHJvZ3JhbSkgew0KICAgIHRoaXMubWkgPSBtaTsNCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2U7DQogICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7DQogICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbTsNCiAgfQ0KICANCiAgSW50ZWdlciBpbkNPTk8sIGluRlZEVCwgaW5GTUFCLCBpblRNQUIsIGluRkNIQywgaW5UQ0hDDQogIFN0cmluZyBpblBSUkYsIGluQ1VDRCwgaW5DVU5PLCBpbkZJVE4sIGluVElUTixpbkZJVEcsIGluVElURywgaW5GSVRDLCBpblRJVEMsIGluRklUVCwgaW5USVRULCBpbkZSU1AsIGluVFJTUCwgaW5TTEZSLCBpblNMVE8sIA0KICAgICAgaW5GU1VOLCBpblRTVU4sIGluRkNVTiwgaW5UQ1VOLCBpbkZCR1IsIGluVEJHUiwgaW5GUFJDLCBpblRQUkMsIGluRkFTUywgaW5UQVNTDQoNCiAgLy9pbnQgZmNoYywgdGNoYw0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIGluQ09OTyA9IHByb2dyYW0uTERBWkQuQ09OTw0KICAgIGluUFJSRiA9IChtaS5pbi5nZXQoIlBSUkYiKSA9PSBudWxsIHx8IG1pLmluLmdldCgiUFJSRiIpID09ICdudWxsJyk/ICIiOiBtaS5pbi5nZXQoIlBSUkYiKQ0KICAgIGluQ1VDRCA9IChtaS5pbi5nZXQoIkNVQ0QiKSA9PSBudWxsIHx8IG1pLmluLmdldCgiQ1VDRCIpID09ICdudWxsJyk/ICIiOiBtaS5pbi5nZXQoIkNVQ0QiKQ0KICAgIGluQ1VOTyA9IChtaS5pbi5nZXQoIkNVTk8iKSA9PSBudWxsIHx8IG1pLmluLmdldCgiQ1VOTyIpID09ICdudWxsJyk/ICIiOiBtaS5pbi5nZXQoIkNVTk8iKQ0KICAgIGluRlZEVCA9IChtaS5pbi5nZXQoIkZWRFQiKSA9PSBudWxsIHx8IG1pLmluLmdldCgiRlZEVCIpID09ICdudWxsJyk/IDA6ICAoSW50ZWdlciltaS5pbi5nZXQoIkZWRFQiKQ0KICAgIGluRklUTiA9IChtaS5pbi5nZXQoIkZJVE4iKSA9PSBudWxsIHx8IG1pLmluLmdldCgiRklUTiIpID09ICdudWxsJyk/ICIiOiBtaS5pbi5nZXQoIkZJVE4iKQ0KICAgIGluVElUTiA9IChtaS5pbi5nZXQoIlRJVE4iKSA9PSBudWxsIHx8IG1pLmluLmdldCgiVElUTiIpID09ICdudWxsJyk/ICIiOiBtaS5pbi5nZXQoIlRJVE4iKQ0KICAgIGluRklURyA9IChtaS5pbi5nZXQoIkZJVEciKSA9PSBudWxsIHx8IG1pLmluLmdldCgiRklURyIpID09ICdudWxsJyk/ICIiOiBtaS5pbi5nZXQoIkZJVEciKQ0KICAgIGluVElURyA9IChtaS5pbi5nZXQoIlRJVEciKSA9PSBudWxsIHx8IG1pLmluLmdldCgiVElURyIpID09ICdudWxsJyk/ICIiOiBtaS5pbi5nZXQoIlRJVEciKQ0KICAgIGluRklUQyA9IChtaS5pbi5nZXQoIkZJVEMiKSA9PSBudWxsIHx8IG1pLmluLmdldCgiRklUQyIpID09ICdudWxsJyk/ICIiOiBtaS5pbi5nZXQoIkZJVEMiKQ0KICAgIGluVElUQyA9IChtaS5pbi5nZXQoIlRJVEMiKSA9PSBudWxsIHx8IG1pLmluLmdldCgiVElUQyIpID09ICdudWxsJyk/ICIiOiBtaS5pbi5nZXQoIlRJVEMiKQ0KICAgIGluRklUVCA9IChtaS5pbi5nZXQoIkZJVFQiKSA9PSBudWxsIHx8IG1pLmluLmdldCgiRklUVCIpID09ICdudWxsJyk/ICIiOiBtaS5pbi5nZXQoIkZJVFQiKQ0KICAgIGluVElUVCA9IChtaS5pbi5nZXQoIlRJVFQiKSA9PSBudWxsIHx8IG1pLmluLmdldCgiVElUVCIpID09ICdudWxsJyk/ICIiOiBtaS5pbi5nZXQoIlRJVFQiKQ0KICAgIGluRlJTUCA9IChtaS5pbi5nZXQoIkZSU1AiKSA9PSBudWxsIHx8IG1pLmluLmdldCgiRlJTUCIpID09ICdudWxsJyk/ICIiOiBtaS5pbi5nZXQoIkZSU1AiKQ0KICAgIGluVFJTUCA9IChtaS5pbi5nZXQoIlRSU1AiKSA9PSBudWxsIHx8IG1pLmluLmdldCgiVFJTUCIpID09ICdudWxsJyk/ICIiOiBtaS5pbi5nZXQoIlRSU1AiKQ0KICAgIGluU0xGUiA9IChtaS5pbi5nZXQoIlNMRlIiKSA9PSBudWxsIHx8IG1pLmluLmdldCgiU0xGUiIpID09ICdudWxsJyk/ICIiOiBtaS5pbi5nZXQoIlNMRlIiKQ0KICAgIGluU0xUTyA9IChtaS5pbi5nZXQoIlNMVE8iKSA9PSBudWxsIHx8IG1pLmluLmdldCgiU0xUTyIpID09ICdudWxsJyk/ICIiOiBtaS5pbi5nZXQoIlNMVE8iKQ0KICAgIGluRk1BQiA9IChtaS5pbi5nZXQoIkZNQUIiKSA9PSBudWxsIHx8IG1pLmluLmdldCgiRk1BQiIpID09ICdudWxsJyk/IDA6IChJbnRlZ2VyKW1pLmluLmdldCgiRk1BQiIpDQogICAgaW5UTUFCID0gKG1pLmluLmdldCgiVE1BQiIpID09IG51bGwgfHwgbWkuaW4uZ2V0KCJUTUFCIikgPT0gJ251bGwnKT8gMDogKEludGVnZXIpbWkuaW4uZ2V0KCJUTUFCIikNCiAgICBpbkZDSEMgPSAobWkuaW4uZ2V0KCJGQ0hDIikgPT0gbnVsbCB8fCBtaS5pbi5nZXQoIkZDSEMiKSA9PSAnbnVsbCcpPyAwOiAoSW50ZWdlciltaS5pbi5nZXQoIkZDSEMiKQ0KICAgIGluVENIQyA9IChtaS5pbi5nZXQoIlRDSEMiKSA9PSBudWxsIHx8IG1pLmluLmdldCgiVENIQyIpID09ICdudWxsJyk/IDA6IChJbnRlZ2VyKW1pLmluLmdldCgiVENIQyIpDQogICAgaW5GU1VOID0gKG1pLmluLmdldCgiRlNVTiIpID09IG51bGwgfHwgbWkuaW4uZ2V0KCJGU1VOIikgPT0gJ251bGwnKT8gIiI6IG1pLmluLmdldCgiRlNVTiIpDQogICAgaW5UU1VOID0gKG1pLmluLmdldCgiVFNVTiIpID09IG51bGwgfHwgbWkuaW4uZ2V0KCJUU1VOIikgPT0gJ251bGwnKT8gIiI6IG1pLmluLmdldCgiVFNVTiIpDQogICAgaW5GQ1VOID0gKG1pLmluLmdldCgiRkNVTiIpID09IG51bGwgfHwgbWkuaW4uZ2V0KCJGQ1VOIikgPT0gJ251bGwnKT8gIiI6IG1pLmluLmdldCgiRkNVTiIpDQogICAgaW5UQ1VOID0gKG1pLmluLmdldCgiVENVTiIpID09IG51bGwgfHwgbWkuaW4uZ2V0KCJUQ1VOIikgPT0gJ251bGwnKT8gIiI6IG1pLmluLmdldCgiVENVTiIpDQogICAgaW5GQkdSID0gKG1pLmluLmdldCgiRkJHUiIpID09IG51bGwgfHwgbWkuaW4uZ2V0KCJGQkdSIikgPT0gJ251bGwnKT8gIiI6IG1pLmluLmdldCgiRkJHUiIpDQogICAgaW5UQkdSID0gKG1pLmluLmdldCgiVEJHUiIpID09IG51bGwgfHwgbWkuaW4uZ2V0KCJUQkdSIikgPT0gJ251bGwnKT8gIiI6IG1pLmluLmdldCgiVEJHUiIpDQogICAgaW5GUFJDID0gKG1pLmluLmdldCgiRlBSQyIpID09IG51bGwgfHwgbWkuaW4uZ2V0KCJGUFJDIikgPT0gJ251bGwnKT8gIiI6IG1pLmluLmdldCgiRlBSQyIpDQogICAgaW5UUFJDID0gKG1pLmluLmdldCgiVFBSQyIpID09IG51bGwgfHwgbWkuaW4uZ2V0KCJUUFJDIikgPT0gJ251bGwnKT8gIiI6IG1pLmluLmdldCgiVFBSQyIpDQogICAgaW5GQVNTID0gKG1pLmluLmdldCgiRkFTUyIpID09IG51bGwgfHwgbWkuaW4uZ2V0KCJGQVNTIikgPT0gJ251bGwnKT8gIiI6IG1pLmluLmdldCgiRkFTUyIpDQogICAgaW5UQVNTID0gKG1pLmluLmdldCgiVEFTUyIpID09IG51bGwgfHwgbWkuaW4uZ2V0KCJUQVNTIikgPT0gJ251bGwnKT8gIiI6IG1pLmluLmdldCgiVEFTUyIpDQogICAgDQogICAgLy92YWxpZGF0ZSBmaWVsZHMNCiAgICBpZiAoIXZhbGlkYXRlSW5wdXRGaWVsZHMoKSkgew0KICAgICAgcmV0dXJuDQogICAgfQ0KICAgIA0KICAgIGRvVXBkYXRlT1BSSUNIKCkNCiAgICANCiAgfQ0KICAvKioNCiAgICogVmFsaWRhdGUgaW5wdXQgZmllbGRzIHNpbWxpYXIgdG8gc3RhbmRhcmQgT0lTMDE3L0YNCiAgICovDQogIGRlZiB2YWxpZGF0ZUlucHV0RmllbGRzKCkgew0KICAgIGlmIChpblBSUkYgPT0gIiIpDQogICAgew0KICAgICAgbWkuZXJyb3IoIlByaWNlIGxpc3QgY29kZSBpcyBtYW5kYXRvcnkiKQ0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgfQ0KICAgIGlmIChpbkNVQ0QgPT0gIiIpDQogICAgew0KICAgICAgbWkuZXJyb3IoIkN1cnJlbmN5IGNvZGUgaXMgbWFuZGF0b3J5IikNCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0NCiAgICBpZiAoaW5GVkRUID09IDApDQogICAgew0KICAgICAgbWkuZXJyb3IoIlZhbGlkIGZyb20gZGF0ZSBpcyBtYW5kYXRvcnkiKQ0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgfSBlbHNlIHsNCiAgICAgIGlmIChpbkZWRFQgIT0gMCAmJiAhaXNEYXRlVmFsaWQoaW5GVkRULnRvU3RyaW5nKCksICJ5eXl5TU1kZCIpKSB7DQogICAgICBtaS5lcnJvcigiVmFsaWQgZnJvbSBkYXRlICR7aW5GVkRUfSBpcyBpbnZhbGlkIikNCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0NCiAgICB9DQogICAgaWYgKGluVElUTi5pc0JsYW5rKCkpIHsNCiAgICAgIGxvZ2dlci5lcnJvcigiQmVmb3JlIFBhZGRlZCBUSVROID0gKiR7aW5USVROfSoiKQ0KICAgICAgaW5USVROID0gaW5USVROLnBhZExlZnQoMTUsICdcdUZGRUUnKQ0KICAgICAgbG9nZ2VyLmVycm9yKCJQYWRkZWQgVElUTiA9ICoke2luVElUTn0qIikNCiAgICB9DQogICAgDQogICAgbG9nZ2VyLmVycm9yKCJWYWx1ZSBUSVROID0gJHtpblRJVE59LCBGSVROID0gJHtpbkZJVE59IikNCiAgICBpZiAoaW5USVROLmNvbXBhcmVUbyhpbkZJVE4pIDwgMCkgew0KICAgICAgbWkuZXJyb3IoIlRvIHZhbHVlICR7aW5USVROfSBsZXNzIHRoYW4gZnJvbSB2YWx1ZSAke2luRklUTn0uIFNlZSBmaWVsZHMgVElUTiBhbmQgRklUTiIpDQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICAgaWYgKGluVElURy5pc0JsYW5rKCkpIHsNCiAgICAgIGluVElURyA9IGluVElURy5wYWRMZWZ0KDgsICdcdUZGRUUnKTsNCiAgICB9DQogICAgaWYgKGluVElURy5jb21wYXJlVG8oaW5GSVRHKSA8IDApIHsNCiAgICAgIG1pLmVycm9yKCJUbyB2YWx1ZSAke2luVElUR30gbGVzcyB0aGFuIGZyb20gdmFsdWUgJHtpbkZJVEd9LiBTZWUgZmllbGRzIFRJVEcgYW5kIEZJVEciKQ0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgfQ0KICAgIGlmIChpblRJVEMuaXNCbGFuaygpKSB7DQogICAgICAgaW5USVRDID0gaW5USVRDLnBhZExlZnQoNSwgJ1x1RkZFRScpOw0KICAgIH0NCiAgICBpZiAoaW5USVRDLmNvbXBhcmVUbyhpbkZJVEMpIDwgMCkgew0KICAgICAgbWkuZXJyb3IoIlRvIHZhbHVlICR7aW5USVRDfSBsZXNzIHRoYW4gZnJvbSB2YWx1ZSAke2luRklUQ30uIFNlZSBmaWVsZHMgVElUQyBhbmQgRklUQyIpDQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICAgaWYgKGluVElUVC5pc0JsYW5rKCkpIHsNCiAgICAgIGluVElUVCA9IGluVElUVC5wYWRMZWZ0KDMsICdcdUZGRUUnKTsNCiAgICB9DQogICAgaWYgKGluVElUVC5jb21wYXJlVG8oaW5GSVRUKSA8IDApIHsNCiAgICAgIG1pLmVycm9yKCJUbyB2YWx1ZSAke2luVElUVH0gbGVzcyB0aGFuIGZyb20gdmFsdWUgJHtpbkZJVFR9LiBTZWUgZmllbGRzIFRJVFQgYW5kIEZJVFQiKQ0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgfQ0KICAgIGlmIChpblRSU1AuaXNCbGFuaygpKSB7DQogICAgICBpblRSU1AgPSBpblRSU1AucGFkTGVmdCgxMCwgJ1x1RkZFRScpOw0KICAgIH0NCiAgICBpZiAoaW5UUlNQLmNvbXBhcmVUbyhpbkZSU1ApIDwgMCkgew0KICAgICAgbWkuZXJyb3IoIlRvIHZhbHVlICR7aW5UUlNQfSBsZXNzIHRoYW4gZnJvbSB2YWx1ZSAke2luRlJTUH0uIFNlZSBmaWVsZHMgVFJTUCBhbmQgRlJTUCIpDQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICAgaWYgKGluU0xUTy5pc0JsYW5rKCkpIHsNCiAgICAgIGluU0xUTyA9IGluU0xUTy5wYWRMZWZ0KDIsICdcdUZGRUUnKTsNCiAgICB9DQogICAgaWYgKGluU0xUTy5jb21wYXJlVG8oaW5TTEZSKSA8IDApIHsNCiAgICAgIG1pLmVycm9yKCJUbyB2YWx1ZSAke2luU0xUT30gbGVzcyB0aGFuIGZyb20gdmFsdWUgJHtpblNMRlJ9LiBTZWUgZmllbGRzIFNMVE8gYW5kIFNMRlIiKQ0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgfQ0KICAgIGlmIChpblRNQUIgPT0gMCkgew0KICAgICAgaW5UTUFCID0gOTsNCiAgICB9IGVsc2Ugew0KICAgICAgaWYgKGluVE1BQiA8IDEgfHwgaW5UTUFCID4gMikgew0KICAgICAgICBtaS5lcnJvcigiTWFrZSBidXkgY29kZSBtdXN0IGJlIGVpdGhlciBibGFuaywgMSBvciAyLiBGb3VuZCB2YWx1ZTogJHtpblRNQUJ9IikNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICB9DQogICAgfQ0KICAgIGlmIChpbkZNQUIgPT0gMCkgew0KICAgICAvLyBkbyBub3RoaW5nDQogICAgfSBlbHNlIHsNCiAgICAgIGlmIChpbkZNQUIgPCAxIHx8IGluRk1BQiA+IDIpIHsNCiAgICAgICAgICBtaS5lcnJvcigiTWFrZSBidXkgY29kZSBtdXN0IGJlIGVpdGhlciBibGFuaywgMSBvciAyLiBGb3VuZCB2YWx1ZTogJHtpbkZNQUJ9IikNCiAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0NCiAgICB9DQogICAgDQogICAgaWYgKGluVE1BQiA8IGluRk1BQikgew0KICAgICAgbWkuZXJyb3IoIlRvIHZhbHVlICR7aW5UTUFCfSBsZXNzIHRoYW4gZnJvbSB2YWx1ZSAke2luRk1BQn0uIFNlZSBmaWVsZHMgVE1BQiBhbmQgRk1BQiIpDQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICAgaWYgKCEoaW5GQ0hDID49IDAgJiYgaW5GQ0hDIDw9IDUpKSB7DQogICAgICBtaS5lcnJvcigiVGhlIHZhbHVlIG11c3QgYmUgYmV0d2VlbiAwKGJsYW5rKSBhbmQgNS4gRm91bmQgdmFsdWU6ICR7aW5GQ0hDfSIpDQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICAgaWYgKCEoaW5UQ0hDID49IDAgJiYgaW5UQ0hDIDw9IDUpKSB7DQogICAgICBtaS5lcnJvcigiVGhlIHZhbHVlIG11c3QgYmUgYmV0d2VlbiAwKGJsYW5rKSBhbmQgNS4gRm91bmQgdmFsdWU6ICR7aW5UQ0hDfSIpDQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICAgDQogICAgaWYgKGluVENIQyA8IGluRkNIQykgew0KICAgICAgIG1pLmVycm9yKCJUbyB2YWx1ZSAke2luVENIQ30gbGVzcyB0aGFuIGZyb20gdmFsdWUgJHtpbkZDSEN9LiBTZWUgZmllbGRzIFRDSEMgYW5kIEZDSEMiKQ0KICAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0NCiAgICBpZiAoaW5UU1VOLmlzQmxhbmsoKSkgew0KICAgICAgaW5UU1VOID0gaW5UU1VOLnBhZExlZnQoMTAsICdcdUZGRUUnKTsNCiAgICB9DQogICAgaWYgKGluVFNVTi5jb21wYXJlVG8oaW5GU1VOKSA8IDApIHsNCiAgICAgIG1pLmVycm9yKCJUbyB2YWx1ZSAke2luVFNVTn0gbGVzcyB0aGFuIGZyb20gdmFsdWUgJHtpbkZTVU59LiBTZWUgZmllbGRzIFRTVU4gYW5kIEZTVU4iKQ0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgfQ0KICAgIGlmIChpblRDVU4uaXNCbGFuaygpKSB7DQogICAgICAgaW5UQ1VOID0gaW5UQ1VOLnBhZExlZnQoMTAsICdcdUZGRUUnKTsNCiAgICB9DQogICAgaWYgKGluVENVTi5jb21wYXJlVG8oaW5GQ1VOKSA8IDApIHsNCiAgICAgIG1pLmVycm9yKCJUbyB2YWx1ZSAke2luVENVTn0gbGVzcyB0aGFuIGZyb20gdmFsdWUgJHtpbkZDVU59LiBTZWUgZmllbGRzIFRDVU4gYW5kIEZDVU4iKQ0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgfQ0KICAgIGlmIChpblRCR1IuaXNCbGFuaygpKSB7DQogICAgICAgaW5UQkdSID0gaW5UQkdSLnBhZExlZnQoMiwgJ1x1RkZFRScpOw0KICAgIH0NCiAgICBpZiAoaW5UQkdSLmNvbXBhcmVUbyhpbkZCR1IpIDwgMCkgew0KICAgICAgbWkuZXJyb3IoIlRvIHZhbHVlICR7aW5UQkdSfSBsZXNzIHRoYW4gZnJvbSB2YWx1ZSAke2luRkJHUn0uIFNlZSBmaWVsZHMgVEJHUiBhbmQgRkJHUiIpDQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICAgaWYgKGluVFBSQy5pc0JsYW5rKCkpIHsNCiAgICAgIGluVFBSQyA9IGluVFBSQy5wYWRMZWZ0KDIsICdcdUZGRUUnKTsNCiAgICB9DQogICAgaWYgKGluVFBSQy5jb21wYXJlVG8oaW5GUFJDKSA8IDApIHsNCiAgICAgIG1pLmVycm9yKCJUbyB2YWx1ZSAke2luVFBSQ30gbGVzcyB0aGFuIGZyb20gdmFsdWUgJHtpbkZQUkN9LiBTZWUgZmllbGRzIFRQUkMgYW5kIEZQUkMiKQ0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgfQ0KICAgIGlmIChpblRBU1MuaXNCbGFuaygpKSB7DQogICAgICAgaW5UQVNTID0gaW5UQVNTLnBhZExlZnQoNiwgJ1x1RkZFRScpOw0KICAgIH0NCiAgICBpZiAoaW5UQVNTLmNvbXBhcmVUbyhpbkZBU1MpIDwgMCkgew0KICAgICAgIG1pLmVycm9yKCJUbyB2YWx1ZSAke2luVEFTU30gbGVzcyB0aGFuIGZyb20gdmFsdWUgJHtpbkZBU1N9LiBTZWUgZmllbGRzIFRBU1MgYW5kIEZBU1MiKQ0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgfQ0KICAgIC8vIGlmIChpblRTTEUgPCBpbkZTTEUpIHsNCiAgICAvLyAgIG1pLmVycm9yKCJUbyB2YWx1ZSBsZXNzIHRoYW4gZnJvbSB2YWx1ZSIpDQogICAgLy8gICByZXR1cm4gZmFsc2UNCiAgICAvLyB9DQogICAgcmV0dXJuIHRydWUNCiAgfQ0KICANCiAgLyoqDQogICAqIFVwZGF0ZSBTYWxlcyBQcmljZSAoT1BSSUNIKSByZWNvcmQuDQogICAqLw0KICBkZWYgZG9VcGRhdGVPUFJJQ0goKSB7DQogICAgaW50IGN1cnJlbnREYXRlID0gTG9jYWxEYXRlLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIikpLnRvSW50ZWdlcigpOw0KICAgIGludCBjdXJyZW50VGltZSA9IEludGVnZXIudmFsdWVPZihMb2NhbERhdGVUaW1lLm5vdygpLmZvcm1hdChEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oIkhIbW1zcyIpKSk7DQogICAgQ2xvc3VyZSB1cGRhdGVPUFJJQ0ggPSB7IExvY2tlZFJlc3VsdCByZWNvcmQgLT4NCiAgICAgIHJlY29yZC5zZXQoIk9KRklUTiIsIGluRklUTik7DQogICAgICByZWNvcmQuc2V0KCJPSlRJVE4iLCBpblRJVE4pOw0KICAgICAgcmVjb3JkLnNldCgiT0pGSVRHIiwgaW5GSVRHKTsNCiAgICAgIHJlY29yZC5zZXQoIk9KVElURyIsIGluVElURyk7DQogICAgICByZWNvcmQuc2V0KCJPSkZJVEMiLCBpbkZJVEMpOw0KICAgICAgcmVjb3JkLnNldCgiT0pUSVRDIiwgaW5USVRDKTsNCiAgICAgIHJlY29yZC5zZXQoIk9KRklUVCIsIGluRklUVCk7DQogICAgICByZWNvcmQuc2V0KCJPSlRJVFQiLCBpblRJVFQpOw0KICAgICAgcmVjb3JkLnNldCgiT0pGUlNQIiwgaW5GUlNQKTsNCiAgICAgIHJlY29yZC5zZXQoIk9KVFJTUCIsIGluVFJTUCk7DQogICAgICByZWNvcmQuc2V0KCJPSlNMRlIiLCBpblNMRlIpOw0KICAgICAgcmVjb3JkLnNldCgiT0pTTFRPIiwgaW5TTFRPKTsNCiAgICAgIHJlY29yZC5zZXQoIk9KRk1BQiIsIGluRk1BQik7DQogICAgICByZWNvcmQuc2V0KCJPSlRNQUIiLCBpblRNQUIpOw0KICAgICAgcmVjb3JkLnNldCgiT0pGQ0hDIiwgaW5GQ0hDKTsNCiAgICAgIHJlY29yZC5zZXQoIk9KVENIQyIsIGluVENIQyk7DQogICAgICByZWNvcmQuc2V0KCJPSkZTVU4iLCBpbkZTVU4pOw0KICAgICAgcmVjb3JkLnNldCgiT0pUU1VOIiwgaW5UU1VOKTsNCiAgICAgIHJlY29yZC5zZXQoIk9KRkNVTiIsIGluRkNVTik7DQogICAgICByZWNvcmQuc2V0KCJPSlRDVU4iLCBpblRDVU4pOw0KICAgICAgcmVjb3JkLnNldCgiT0pGQkdSIiwgaW5GQkdSKTsNCiAgICAgIHJlY29yZC5zZXQoIk9KVEJHUiIsIGluVEJHUik7DQogICAgICByZWNvcmQuc2V0KCJPSkZQUkMiLCBpbkZQUkMpOw0KICAgICAgcmVjb3JkLnNldCgiT0pUUFJDIiwgaW5UUFJDKTsNCiAgICAgIHJlY29yZC5zZXQoIk9KRkFTUyIsIGluRkFTUyk7DQogICAgICByZWNvcmQuc2V0KCJPSlRBU1MiLCBpblRBU1MpOw0KICAgICAgcmVjb3JkLnNldCgiT0pMTURUIiwgY3VycmVudERhdGUpOw0KICAgICAgcmVjb3JkLnNldCgiT0pDSElEIiwgcHJvZ3JhbS5nZXRVc2VyKCkpOw0KICAgICAgcmVjb3JkLnNldCgiT0pDSE5PIiwgcmVjb3JkLmdldEludCgiT0pDSE5PIikgKyAxKTsNCiAgICAgIHJlY29yZC51cGRhdGUoKTsNCiAgICB9Ow0KDQogICAgREJBY3Rpb24gYWN0aW9uT1BSSUNIID0gZGF0YWJhc2UudGFibGUoIk9QUklDSCIpLmluZGV4KCIwMCIpLmJ1aWxkKCk7DQoNCiAgICBEQkNvbnRhaW5lciBPUFJJQ0ggPSBhY3Rpb25PUFJJQ0guZ2V0Q29udGFpbmVyKCk7DQogICAgT1BSSUNILnNldCgiT0pDT05PIiwgaW5DT05PKTsNCiAgICBPUFJJQ0guc2V0KCJPSlBSUkYiLCBpblBSUkYpOw0KICAgIE9QUklDSC5zZXQoIk9KQ1VDRCIsIGluQ1VDRCk7DQogICAgT1BSSUNILnNldCgiT0pDVU5PIiwgaW5DVU5PKTsNCiAgICBPUFJJQ0guc2V0KCJPSkZWRFQiLCBpbkZWRFQpOw0KDQogICAgaWYgKCFhY3Rpb25PUFJJQ0gucmVhZExvY2soT1BSSUNILCB1cGRhdGVPUFJJQ0gpKSB7IA0KICAgICAgbWkuZXJyb3IoIlJlY29yZCBub3QgZm91bmQiKQ0KICAgICAgcmV0dXJuDQogICAgICAvKg0KICAgICAgT1BSSUNILnNldCgiT0pGU0xFIiwgMCk7DQogICAgICBPUFJJQ0guc2V0KCJPSlRTTEUiLCAyKTsNCiAgICAgIE9QUklDSC5zZXQoIk9KUkdEVCIsIGN1cnJlbnREYXRlKQ0KICAgICAgT1BSSUNILnNldCgiT0pSR1RNIiwgY3VycmVudFRpbWUpDQogICAgICBPUFJJQ0guc2V0KCJPSkxNRFQiLCBjdXJyZW50RGF0ZSkNCiAgICAgIE9QUklDSC5zZXQoIk9KQ0hOTyIsIDEpDQogICAgICBPUFJJQ0guc2V0KCJPSkNISUQiLCBwcm9ncmFtLmdldFVzZXIoKSkNCg0KICAgICAgQ2xvc3VyZTw/PiBpbnNlcnRDYWxsQmFjayA9IHt9DQogIA0KICAgICAgYWN0aW9uT1BSSUNILmluc2VydChPUFJJQ0gsIGluc2VydENhbGxCYWNrKQ0KICAgICAgKi8NCiAgICB9DQogIH0NCiAgDQogIC8qKg0KICAgKiBDaGVjayBpZiBkYXRlIGlzIHZhbGlkDQogICAqIEBwYXJhbSBkYXRlIERhdGUgdG8gY2hlY2sNCiAgICogQHBhcmFtIGZvcm1hdCBGb3JtYXQgb2YgdGhlIGRhdGUNCiAgICogQHJldHVybiB7QGNvZGUgdHJ1ZX0gaWYgZGF0ZSBpcyB2YWxpZA0KICAgKi8NCiAgcHVibGljIGJvb2xlYW4gaXNEYXRlVmFsaWQoU3RyaW5nIGRhdGUsIFN0cmluZyBmb3JtYXQpIHsNCiAgICB0cnkgew0KICAgICAgTG9jYWxEYXRlLnBhcnNlKGRhdGUsIERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybihmb3JtYXQpKQ0KICAgICAgcmV0dXJuIHRydWUNCiAgICB9IGNhdGNoIChEYXRlVGltZVBhcnNlRXhjZXB0aW9uIGUpIHsNCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0NCiAgfQ0KfQ=="}}}